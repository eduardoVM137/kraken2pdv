<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Wizard alta producto – v2</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.4/dist/tailwind.min.css" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
</head>
<body class="bg-gray-100 p-8">

<div class="mx-auto max-w-4xl rounded-2xl bg-white shadow-lg">
  <!-- Tabs -->
  <div class="flex gap-4 border-b px-6 pt-4">
    <button class="tab active" data-tab="1">Básico</button>
    <button class="tab" data-tab="2">Presentaciones</button>
    <button class="tab" data-tab="3">Inventario</button>
    <button class="tab" data-tab="4">Ubicaciones</button>
    <button class="tab" data-tab="5">Opcionales</button>
    <button class="tab" data-tab="6">Media</button>
  </div>

  <!-- Scroll area -->
  <div id="panel" class="h-[70vh] overflow-y-auto p-8">
    <!-- Paso 1 … Paso 5 igual que antes -->

    <!-- =====================  MEDIA  ===================== -->
    <section data-step="6" class="hidden space-y-8">
      <h2 class="text-2xl font-semibold">Media (Fotos & archivos)</h2>

      <!-- Drag & drop -->
      <div id="drop" class="flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-teal-400 p-10 text-center text-teal-600 cursor-pointer">
        <svg width="40" height="40" fill="currentColor" class="mb-3"><path d="M20 3a1 1 0 0 1 1 1v20l5.293-5.293a1 1 0 0 1 1.414 1.414l-7.707 7.707a1 1 0 0 1-1.414 0l-7.707-7.707a1 1 0 0 1 1.414-1.414L19 24V4a1 1 0 0 1 1-1z"/></svg>
        <p class="font-medium">Arrastra imágenes o haz clic para seleccionarlas</p>
        <input type="file" id="fileInput" accept="image/*" multiple class="hidden">
      </div>

      <!-- Carrusel -->
      <div class="splide" id="carousel" aria-label="Carrusel de fotos">
        <div class="splide__track">
          <ul class="splide__list" id="slides">
            <!-- previews se inyectan aquí -->
          </ul>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- utilidades -->
<style>
  .label       {@apply block text-sm font-medium text-gray-700 mb-1;}
  .input       {@apply w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:ring-1 focus:ring-teal-500;}
  .btn-primary {@apply rounded-lg bg-teal-600 px-6 py-2 font-medium text-white hover:bg-teal-700;}
  .tab         {@apply py-2 text-sm font-medium text-gray-600 transition hover:text-teal-600;}
  .tab.active  {@apply border-b-2 border-teal-600 text-teal-600;}
</style>

<!-- JS: tabs + carrusel -->
<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
<script>
/*------- pestañas --------*/
document.querySelectorAll('.tab').forEach(btn=>{
  btn.addEventListener('click',()=>{  
    document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
    btn.classList.add('active');
    const step=btn.dataset.tab;
    document.querySelectorAll('[data-step]').forEach(s=>{
      s.classList.toggle('hidden', s.dataset.step!==step);
    });
    document.getElementById('panel').scrollTop=0;
  });
});

/*------- carrusel --------*/
const splide = new Splide('#carousel', { perPage:3, gap:'1rem', pagination:false });
splide.mount();

/*------- drag & drop ------*/
const drop   = document.getElementById('drop');
const input  = document.getElementById('fileInput');
const slides = document.getElementById('slides');

function handleFiles(files){
  [...files].forEach(file=>{
    const url = URL.createObjectURL(file);
    const li  = document.createElement('li');
    li.className='splide__slide flex flex-col items-center';
    li.innerHTML=`
      <img src="${url}" class="h-24 w-24 object-cover rounded-md mb-2">
      <button class="text-xs text-red-600 remove">Eliminar</button>`;
    slides.appendChild(li);
    splide.refresh();
  });
}

drop.addEventListener('click',()=>input.click());
input.addEventListener('change',e=>handleFiles(e.target.files));
drop.addEventListener('dragover',e=>{e.preventDefault();drop.classList.add('bg-teal-50');});
drop.addEventListener('dragleave',()=>drop.classList.remove('bg-teal-50'));
drop.addEventListener('drop',e=>{
  e.preventDefault();drop.classList.remove('bg-teal-50');
  handleFiles(e.dataTransfer.files);
});
document.addEventListener('click',e=>{
  if(e.target.classList.contains('remove')){
    const li=e.target.closest('li');
    li.remove(); splide.refresh();
  }
});
</script>
</body>
</html>
